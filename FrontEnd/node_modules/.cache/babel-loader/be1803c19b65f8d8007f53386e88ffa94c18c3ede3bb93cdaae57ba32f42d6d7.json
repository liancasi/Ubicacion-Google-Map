{"ast":null,"code":"const API_URL = 'http://localhost:9001/Laboratorio1';\nconst getToken = () => localStorage.getItem('token');\nconst handleResponse = async response => {\n  if (!response.ok) {\n    if (response.status === 401) {\n      throw new Error('Acceso no autorizado. Inicia sesión nuevamente.');\n    }\n    const errorText = await response.text();\n    throw new Error(`Error en la solicitud: ${response.status} ${response.statusText} - ${errorText}`);\n  }\n  return response.json();\n};\nconst PersonaService = {\n  getHeaders: () => {\n    const token = getToken();\n    if (!token) {\n      throw new Error('No se encontró un token. Inicia sesión nuevamente.');\n    }\n    return {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    };\n  },\n  getAllPersons: async () => {\n    try {\n      const response = await fetch(`${API_URL}/personas`, {\n        method: 'GET',\n        headers: PersonaService.getHeaders()\n      });\n      return handleResponse(response);\n    } catch (error) {\n      console.error('Error al obtener personas:', error);\n      throw error;\n    }\n  },\n  getPersonById: async id => {\n    try {\n      const response = await fetch(`${API_URL}/personas/${id}`, {\n        method: 'GET',\n        headers: PersonaService.getHeaders()\n      });\n      return handleResponse(response);\n    } catch (error) {\n      console.error(`Error al obtener persona con ID ${id}:`, error);\n      throw error;\n    }\n  },\n  createPerson: async personData => {\n    try {\n      const response = await fetch(`${API_URL}/personas`, {\n        method: 'POST',\n        headers: PersonaService.getHeaders(),\n        body: JSON.stringify(personData)\n      });\n      return handleResponse(response);\n    } catch (error) {\n      console.error('Error al crear persona:', error);\n      throw error;\n    }\n  },\n  updatePerson: async (id, personData) => {\n    try {\n      const response = await fetch(`${API_URL}/personas/${id}`, {\n        method: 'PUT',\n        headers: PersonaService.getHeaders(),\n        body: JSON.stringify(personData)\n      });\n      return handleResponse(response);\n    } catch (error) {\n      console.error(`Error al actualizar persona con ID ${id}:`, error);\n      throw error;\n    }\n  },\n  deletePerson: async id => {\n    try {\n      const response = await fetch(`${API_URL}/personas/${id}`, {\n        method: 'DELETE',\n        headers: PersonaService.getHeaders()\n      });\n      return handleResponse(response);\n    } catch (error) {\n      console.error(`Error al eliminar persona con ID ${id}:`, error);\n      throw error;\n    }\n  },\n  fetchCoordinates: async ids => {\n    try {\n      const queryParams = ids.map(id => `ids=${id}`).join('&');\n      const response = await fetch(`${API_URL}/coordenadas/lista?${queryParams}`, {\n        method: 'GET',\n        headers: PersonaService.getHeaders()\n      });\n      return handleResponse(response);\n    } catch (error) {\n      console.error('Error al obtener coordenadas:', error);\n      throw error;\n    }\n  }\n};\nexport default PersonaService;","map":{"version":3,"names":["API_URL","getToken","localStorage","getItem","handleResponse","response","ok","status","Error","errorText","text","statusText","json","PersonaService","getHeaders","token","getAllPersons","fetch","method","headers","error","console","getPersonById","id","createPerson","personData","body","JSON","stringify","updatePerson","deletePerson","fetchCoordinates","ids","queryParams","map","join"],"sources":["C:/Users/ASUS/git/repository/laboratoriofrontend/src/services/PersonaService.js"],"sourcesContent":["const API_URL = 'http://localhost:9001/Laboratorio1';\r\n\r\nconst getToken = () => localStorage.getItem('token');\r\n\r\nconst handleResponse = async (response) => {\r\n  if (!response.ok) {\r\n    if (response.status === 401) {\r\n      throw new Error('Acceso no autorizado. Inicia sesión nuevamente.');\r\n    }\r\n    const errorText = await response.text();\r\n    throw new Error(`Error en la solicitud: ${response.status} ${response.statusText} - ${errorText}`);\r\n  }\r\n  return response.json();\r\n};\r\n\r\nconst PersonaService = {\r\n  getHeaders: () => {\r\n    const token = getToken();\r\n    if (!token) {\r\n      throw new Error('No se encontró un token. Inicia sesión nuevamente.');\r\n    }\r\n    return {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`,\r\n    };\r\n  },\r\n\r\n  getAllPersons: async () => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/personas`, {\r\n        method: 'GET',\r\n        headers: PersonaService.getHeaders(),\r\n      });\r\n      return handleResponse(response);\r\n    } catch (error) {\r\n      console.error('Error al obtener personas:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  getPersonById: async (id) => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/personas/${id}`, {\r\n        method: 'GET',\r\n        headers: PersonaService.getHeaders(),\r\n      });\r\n      return handleResponse(response);\r\n    } catch (error) {\r\n      console.error(`Error al obtener persona con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  createPerson: async (personData) => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/personas`, {\r\n        method: 'POST',\r\n        headers: PersonaService.getHeaders(),\r\n        body: JSON.stringify(personData),\r\n      });\r\n      return handleResponse(response);\r\n    } catch (error) {\r\n      console.error('Error al crear persona:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  updatePerson: async (id, personData) => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/personas/${id}`, {\r\n        method: 'PUT',\r\n        headers: PersonaService.getHeaders(),\r\n        body: JSON.stringify(personData),\r\n      });\r\n      return handleResponse(response);\r\n    } catch (error) {\r\n      console.error(`Error al actualizar persona con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  deletePerson: async (id) => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/personas/${id}`, {\r\n        method: 'DELETE',\r\n        headers: PersonaService.getHeaders(),\r\n      });\r\n      return handleResponse(response);\r\n    } catch (error) {\r\n      console.error(`Error al eliminar persona con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  fetchCoordinates: async (ids) => {\r\n    try {\r\n      const queryParams = ids.map(id => `ids=${id}`).join('&');\r\n      const response = await fetch(`${API_URL}/coordenadas/lista?${queryParams}`, {\r\n        method: 'GET',\r\n        headers: PersonaService.getHeaders(),\r\n      });\r\n      return handleResponse(response);\r\n    } catch (error) {\r\n      console.error('Error al obtener coordenadas:', error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\nexport default PersonaService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}